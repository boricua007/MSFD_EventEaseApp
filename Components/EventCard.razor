@using MSFD_EventEaseApp.Models

<div class="card event-card h-100 shadow-sm">
    <div class="card-header bg-primary text-white">
        <h5 class="card-title mb-0">@Event.Name</h5>
    </div>
    <div class="card-body d-flex flex-column">
        <div class="mb-3">
            <span class="badge bg-secondary">@Event.Category</span>
        </div>
        
        <p class="card-text flex-grow-1">
            @if (Event.Description.Length > 120)
            {
                @(Event.Description.Substring(0, 120) + "...")
            }
            else
            {
                @Event.Description
            }
        </p>
        
        <div class="event-details mb-3">
            <div class="mb-2">
                <i class="bi bi-calendar3"></i>
                <strong>Date: </strong> @Event.Date.ToString("MMM dd, yyyy")
            </div>
            <div class="mb-2">
                <i class="bi bi-clock"></i>
                <strong>Time: </strong> @Event.Date.ToString("h:mm tt")
            </div>
            <div class="mb-2">
                <i class="bi bi-geo-alt"></i>
                <strong>Location: </strong> @Event.Location
            </div>
            <div class="mb-2">
                <i class="bi bi-currency-dollar"></i>
                <strong>Price: </strong> $@Event.Price.ToString("F2")
            </div>
            <div class="mb-2">
                <i class="bi bi-people"></i>
                <strong>Available Seats: </strong> @Event.AvailableSeats
            </div>
        </div>
    </div>
    <div class="card-footer">
        <button class="btn btn-primary w-100" @onclick="HandleViewDetails">
            View Details 
        </button>
    </div>
</div>

<style>
    .event-card {
        transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        border-radius: 10px;
    }

    .event-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 25px rgba(0,0,0,0.15) !important;
    }

    .event-details i {
        margin-right: 8px;
        width: 16px;
    }

    .card-header {
        border-bottom: none;
        border-radius: 10px 10px 0 0;
    }

    .badge {
        font-size: 0.75em;
    }

    .card-footer {
        border-top: none;
        background-color: transparent;
        border-radius: 0 0 10px 10px;
    }
</style>

@code {
    [Parameter] public Event Event { get; set; } = new();
    [Parameter] public EventCallback<int> OnViewDetails { get; set; }

    private async Task HandleViewDetails()
    {
        await OnViewDetails.InvokeAsync(Event.EventId);
    }
}